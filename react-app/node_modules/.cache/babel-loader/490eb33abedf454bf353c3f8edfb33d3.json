{"ast":null,"code":"import _slicedToArray from \"/Users/andrewfava/Desktop/connectd/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/andrewfava/Desktop/connectd/react-app/src/components/AddReviews/AddReviews.js\";\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport './addReviews.css';\nimport { AddReview } from '../../store/review';\n\nfunction AddReviews(_ref) {\n  var event = _ref.event;\n  var reviews = useSelector(function (state) {\n    return state.reviews;\n  });\n  var now = new Date().toISOString().slice(0, 10);\n\n  var _useState = useState(now),\n      _useState2 = _slicedToArray(_useState, 2),\n      created_at = _useState2[0],\n      setCreatedAt = _useState2[1];\n\n  var _useState3 = useState(now),\n      _useState4 = _slicedToArray(_useState3, 2),\n      updated_at = _useState4[0],\n      setUpdatedAt = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      review_body = _useState6[0],\n      setReviewBody = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      review_rating = _useState8[0],\n      setRating = _useState8[1];\n\n  var _useState9 = useState(event.user_id),\n      _useState10 = _slicedToArray(_useState9, 2),\n      user_id = _useState10[0],\n      setUserId = _useState10[1];\n\n  var _useState11 = useState(event.id),\n      _useState12 = _slicedToArray(_useState11, 2),\n      event_id = _useState12[0],\n      setEventId = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      isClicked = _useState14[0],\n      setIsClicked = _useState14[1];\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      errors = _useState16[0],\n      setErrors = _useState16[1];\n\n  var dispatch = useDispatch();\n\n  var resetFields = function resetFields() {\n    setCreatedAt(now);\n    setUpdatedAt(now);\n    setReviewBody('');\n    setRating(0);\n    setUserId(event.user_id);\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    var errors = [];\n    if (!review_body) errors.push('Please provide a review');\n    if (!review_rating) errors.push('Please provide a rating');\n    setErrors(errors);\n\n    if (!errors.length) {\n      var review = {\n        created_at: now,\n        updated_at: now,\n        review_body: review_body,\n        review_rating: review_rating,\n        user_id: 1,\n        event_id: event.id\n      };\n      dispatch(AddReview(review));\n      resetFields();\n      setIsClicked(false);\n    }\n  };\n\n  var getAverageRating = function getAverageRating() {\n    var total = 0;\n    var average = 0;\n\n    if (reviews.length > 0) {\n      reviews.forEach(function (review) {\n        total += review.review_rating;\n      });\n      average = total / reviews.length;\n    }\n\n    return average.toFixed(2);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"add-review\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"event-reviews-review\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa-solid fa-star review-star\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 44\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"single-event-average-rating\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 94\n    }\n  }, getAverageRating()), \" \", /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa-solid fa-circle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 168\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"review-length-review\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 207\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 247\n    }\n  }), reviews.length, \" review(s)\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"add-review-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"add-review-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, \"Leave A Review\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"add-review-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"add-review-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    type: \"text\",\n    placeholder: \"Write a review\",\n    value: review_body,\n    onChange: function onChange(e) {\n      return setReviewBody(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"add-review-rating\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 19\n    }\n  }, \"Rating\"), /*#__PURE__*/React.createElement(\"select\", {\n    value: review_rating,\n    onChange: function onChange(e) {\n      return setRating(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 23\n    }\n  }, \"Select a rating\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 23\n    }\n  }, \"1\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 23\n    }\n  }, \"2\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 23\n    }\n  }, \"3\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 23\n    }\n  }, \"4\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 23\n    }\n  }, \"5\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"add-review-submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 19\n    }\n  }, \"Submit\"))))));\n}\n\nexport default AddReviews;","map":{"version":3,"names":["React","useState","useDispatch","useSelector","AddReview","AddReviews","event","reviews","state","now","Date","toISOString","slice","created_at","setCreatedAt","updated_at","setUpdatedAt","review_body","setReviewBody","review_rating","setRating","user_id","setUserId","id","event_id","setEventId","isClicked","setIsClicked","errors","setErrors","dispatch","resetFields","handleSubmit","e","preventDefault","push","length","review","getAverageRating","total","average","forEach","toFixed","target","value"],"sources":["/Users/andrewfava/Desktop/connectd/react-app/src/components/AddReviews/AddReviews.js"],"sourcesContent":["import React, { useState} from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport './addReviews.css'\n\nimport { AddReview } from '../../store/review';\n\n\nfunction AddReviews({event}) {\n    const reviews = useSelector(state => state.reviews);\n    let now = new Date().toISOString().slice(0, 10);\n\n    const [created_at, setCreatedAt] = useState(now)\n    const [updated_at, setUpdatedAt] = useState(now)\n    const [review_body, setReviewBody] = useState('')\n    const [review_rating, setRating] = useState(0)\n    const [user_id, setUserId] = useState(event.user_id)\n    const [event_id, setEventId] = useState(event.id)\n    const [isClicked, setIsClicked] = useState(false)\n    const [errors, setErrors] = useState([])\n\n    const dispatch = useDispatch();\n\n\n    const resetFields = () => {\n        setCreatedAt(now)\n        setUpdatedAt(now)\n        setReviewBody('')\n        setRating(0)\n        setUserId(event.user_id)\n    }\n\n    const handleSubmit = (e) => {\n        e.preventDefault()\n\n        const errors = []\n\n        if (!review_body) errors.push('Please provide a review')\n        if (!review_rating) errors.push('Please provide a rating')\n\n        setErrors(errors)\n\n        if(!errors.length){\n            const review = {\n                created_at: now,\n                updated_at: now,\n                review_body,\n                review_rating,\n                user_id:1,\n                event_id: event.id\n            }\n            dispatch(AddReview(review))\n            resetFields()\n            setIsClicked(false)\n        }\n    }\n\n    const getAverageRating = () => {\n        let total = 0;\n        let average = 0;\n        if(reviews.length > 0){\n          reviews.forEach(review => {\n            total += review.review_rating;\n          })\n          average = total / reviews.length;\n        }\n        return average.toFixed(2);\n      }\n\n\n  return (\n    <div className='add-review'>\n    <div className=\"event-reviews-review\" ><i className=\"fa-solid fa-star review-star\" ></i> <span className=\"single-event-average-rating\">{getAverageRating()}</span> <i className=\"fa-solid fa-circle\"></i> <span className=\"review-length-review\"> <span></span>{reviews.length} review(s)</span></div>\n    <div className='add-review-container'>\n      <div className='add-review-header'>\n        <h4>Leave A Review</h4>\n      </div>\n      <div className='add-review-form'>\n          <form onSubmit={handleSubmit}>\n              <div className='add-review-body'>\n                  <textarea\n                      type='text'\n                      placeholder='Write a review'\n                      value={review_body}\n                      onChange={(e) => setReviewBody(e.target.value)}\n                  />\n              </div>\n              <div className='add-review-rating'>\n                  <label>Rating</label>\n                  <select\n                      value={review_rating}\n                      onChange={(e) => setRating(e.target.value)}\n                  >\n                      <option value='0'>Select a rating</option>\n                      <option value='1'>1</option>\n                      <option value='2'>2</option>\n                      <option value='3'>3</option>\n                      <option value='4'>4</option>\n                      <option value='5'>5</option>\n                  </select>\n              </div>\n              <div className='add-review-submit'>\n                  <button type='submit'>Submit</button>\n              </div>\n          </form>\n      </div>\n  </div>\n\n  </div>\n  )\n}\n\nexport default AddReviews\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}