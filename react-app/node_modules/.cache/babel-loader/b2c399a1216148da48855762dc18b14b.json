{"ast":null,"code":"import _slicedToArray from \"/Users/andrewfava/Desktop/connectd/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/andrewfava/Desktop/connectd/react-app/src/components/RSVPD/RsvpdEvents.js\";\nimport React, { useEffect, useState } from 'react';\nimport { NavLink, useParams, useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { loadRsvpsOnEvent, createRsvp, deleteRsvp } from '../../store/rsvp';\nimport { loadUserInfo } from '../../store/user';\nimport './rsvpdevents.css';\n\nfunction RsvpdEvents(_ref) {\n  var event = _ref.event;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      rsvpd = _useState2[0],\n      setRsvpd = _useState2[1];\n\n  var rsvp = useSelector(function (state) {\n    return state.rsvps;\n  });\n  var sessionUser = useSelector(function (state) {\n    return state.session;\n  });\n  var users = useSelector(function (state) {\n    return state.users.users;\n  });\n\n  var _useParams = useParams(),\n      eventsId = _useParams.eventsId;\n\n  var dispatch = useDispatch();\n  useEffect(function () {\n    dispatch(loadRsvpsOnEvent(eventsId));\n    dispatch(loadUserInfo());\n    dispatch(createRsvp());\n    dispatch(deleteRsvp());\n  }, []);\n  var rsvps = Object.values(rsvp);\n  var rsvpdEvents = rsvps.filter(function (rsvp) {\n    return rsvp.user_id === sessionUser.id;\n  });\n  var rsvpdEvent = rsvpdEvents.find(function (rsvp) {\n    return rsvp.event_id === event.id;\n  });\n\n  var handleRsvp = function handleRsvp(e) {\n    e.preventDefault();\n    var rsvp = {\n      user_id: sessionUser.id,\n      event_id: event.id\n    };\n    dispatch(createRsvp(rsvp.event_id));\n    setRsvpd(true);\n  };\n\n  var handleUnRsvp = function handleUnRsvp(e) {\n    e.preventDefault();\n    dispatch(deleteRsvp(event.id));\n    setRsvpd(false);\n    loadUserEvents;\n    rsvp.length--;\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, sessionUser.id === event.user_id ? /*#__PURE__*/React.createElement(React.Fragment, null, rsvp.length === 1 ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"rsvp-span\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 25\n    }\n  }, rsvp.length, \" person is attending this event.\") : /*#__PURE__*/React.createElement(\"span\", {\n    className: \"rsvp-span-my-event\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, rsvp.length, \" people are attending this event.\"), \" \") : /*#__PURE__*/React.createElement(React.Fragment, null, rsvp && rsvpdEvent ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rsvp-length\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleUnRsvp,\n    className: \"rsvp-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, \"Cancel RSVP\"), rsvp.length === 0 ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"rsvp-span\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 32\n    }\n  }, \"Be the first to RSVP!\") : rsvp.length === 1 ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"rsvp-span\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 33\n    }\n  }, rsvp.length, \" person is attending this event.\") : /*#__PURE__*/React.createElement(\"span\", {\n    className: \"rsvp-span\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, rsvp.length, \" people are attending this event.\")) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rsvp-button-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleRsvp,\n    className: \"rsvp-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, \"RSVP\"), rsvp.length === 0 ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"rsvp-span\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 32\n    }\n  }, \"Be the first to RSVP!\") : rsvp.length === 1 ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"rsvp-span\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 33\n    }\n  }, rsvp.length, \" person is attending this event.\") : /*#__PURE__*/React.createElement(\"span\", {\n    className: \"rsvp-span\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, rsvp.length, \" people are attending this event.\"))));\n}\n\nexport default RsvpdEvents;","map":{"version":3,"names":["React","useEffect","useState","NavLink","useParams","useHistory","useDispatch","useSelector","loadRsvpsOnEvent","createRsvp","deleteRsvp","loadUserInfo","RsvpdEvents","event","rsvpd","setRsvpd","rsvp","state","rsvps","sessionUser","session","users","eventsId","dispatch","Object","values","rsvpdEvents","filter","user_id","id","rsvpdEvent","find","event_id","handleRsvp","e","preventDefault","handleUnRsvp","loadUserEvents","length"],"sources":["/Users/andrewfava/Desktop/connectd/react-app/src/components/RSVPD/RsvpdEvents.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport {NavLink, useParams,useHistory} from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\n\n\nimport { loadRsvpsOnEvent,createRsvp,deleteRsvp } from '../../store/rsvp';\nimport { loadUserInfo } from '../../store/user';\nimport './rsvpdevents.css'\n\n\n\n\nfunction RsvpdEvents({event}) {\n  const [rsvpd , setRsvpd] = useState(false)\n\n  const rsvp = useSelector(state => state.rsvps);\n  const sessionUser = useSelector(state => state.session);\n  const users = useSelector(state => state.users.users);\n\n  const {eventsId} = useParams();\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(loadRsvpsOnEvent(eventsId));\n    dispatch(loadUserInfo());\n    dispatch(createRsvp());\n    dispatch(deleteRsvp());\n  } , []);\n\n  const rsvps = Object.values(rsvp);\n\n\n  const rsvpdEvents = rsvps.filter(rsvp => rsvp.user_id === sessionUser.id)\n\n  const rsvpdEvent = rsvpdEvents.find(rsvp => rsvp.event_id === event.id)\n\n\n\n  const handleRsvp =  (e) => {\n    e.preventDefault();\n    const rsvp = {\n      user_id: sessionUser.id,\n      event_id: event.id\n    }\n\n    dispatch(createRsvp(rsvp.event_id));\n    setRsvpd(true)\n  }\n\n  const handleUnRsvp =  (e) => {\n    e.preventDefault();\n    dispatch(deleteRsvp(event.id));\n    setRsvpd(false)\n    loadUserEvents\n    rsvp.length--\n  }\n\n\n\n  return (\n    <>{sessionUser.id === event.user_id ? <>\n    {\n    rsvp.length === 1 ? <span className=\"rsvp-span\">{rsvp.length} person is attending this event.</span>\n    : <span className=\"rsvp-span-my-event\">{rsvp.length} people are attending this event.</span>\n    } </>\n    :\n      <>\n        {rsvp && rsvpdEvent ?\n        <div className=\"rsvp-length\">\n          <button onClick={handleUnRsvp} className='rsvp-button'>Cancel RSVP</button>\n          {rsvp.length === 0 ? <span className=\"rsvp-span\">Be the first to RSVP!</span>\n          : rsvp.length === 1 ? <span className=\"rsvp-span\">{rsvp.length} person is attending this event.</span>\n          : <span className=\"rsvp-span\">{rsvp.length} people are attending this event.</span>\n          }\n        </div>\n        :\n          <div className=\"rsvp-button-container\">\n          <button onClick={handleRsvp} className='rsvp-button'>RSVP</button>\n          {rsvp.length === 0 ? <span className=\"rsvp-span\">Be the first to RSVP!</span>\n          : rsvp.length === 1 ? <span className=\"rsvp-span\">{rsvp.length} person is attending this event.</span>\n          : <span className=\"rsvp-span\">{rsvp.length} people are attending this event.</span>\n          }\n          </div>\n        }\n      </>\n}\n    </>\n  )\n}\n\n\nexport default RsvpdEvents\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}